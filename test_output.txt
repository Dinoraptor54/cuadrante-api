============================= test session starts =============================
platform win32 -- Python 3.13.7, pytest-9.0.2, pluggy-1.6.0
rootdir: C:\mis proyectos dino\cuadrante_api
plugins: anyio-4.12.0
collected 4 items

tests\test_vacaciones.py ..F.                                            [100%]

================================== FAILURES ===================================
_________________ test_solicitar_vacaciones_formato_invalido __________________

test_user = <models.sql_models.User object at 0x0000020B1BA1F750>

    def test_solicitar_vacaciones_formato_invalido(test_user):
        """Prueba rechazo de formato de fecha inválido"""
        response = client.post(
            "/api/vacaciones/solicitar",
            json={
                "fecha_inicio": "2025/01/01",
                "fecha_fin": "2025/01/05",
                "motivo": "Formato mal"
            }
        )
>       assert response.status_code == 400
E       assert 422 == 400
E        +  where 422 = <Response [422 Unprocessable Entity]>.status_code

tests\test_vacaciones.py:104: AssertionError
---------------------------- Captured stderr call -----------------------------
2025-12-14 01:40:08 - cuadrante_api - WARNING - Error de validación: Formato de fecha inválido: 2025/01/01. Use %Y-%m-%d - Path: /api/vacaciones/solicitar
------------------------------ Captured log call ------------------------------
WARNING  cuadrante_api:logging_config.py:104 Error de validación: Formato de fecha inválido: 2025/01/01. Use %Y-%m-%d - Path: /api/vacaciones/solicitar
============================== warnings summary ===============================
config.py:13
  C:\mis proyectos dino\cuadrante_api\config.py:13: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class Settings(BaseSettings):

models\database.py:19
  C:\mis proyectos dino\cuadrante_api\models\database.py:19: MovedIn20Warning: The ``declarative_base()`` function is now available as sqlalchemy.orm.declarative_base(). (deprecated since: 2.0) (Background on SQLAlchemy 2.0 at: https://sqlalche.me/e/b8d9)
    Base = declarative_base()

routers\permutas.py:35
  C:\mis proyectos dino\cuadrante_api\routers\permutas.py:35: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class PermutaResponse(BaseModel):

routers\empleados.py:29
  C:\mis proyectos dino\cuadrante_api\routers\empleados.py:29: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class EmpleadoResponse(BaseModel):

routers\vacaciones.py:27
  C:\mis proyectos dino\cuadrante_api\routers\vacaciones.py:27: PydanticDeprecatedSince20: Support for class-based `config` is deprecated, use ConfigDict instead. Deprecated in Pydantic V2.0 to be removed in V3.0. See Pydantic V2 Migration Guide at https://errors.pydantic.dev/2.12/migration/
    class VacacionResponse(BaseModel):

tests/test_vacaciones.py::test_solicitar_vacaciones_exitosas
  C:\mis proyectos dino\cuadrante_api\services\vacaciones_service.py:25: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    fecha_solicitud=datetime.utcnow()

tests/test_vacaciones.py::test_solicitar_vacaciones_formato_invalido
  C:\mis proyectos dino\cuadrante_api\utils\validators.py:61: DeprecationWarning: 'HTTP_422_UNPROCESSABLE_ENTITY' is deprecated. Use 'HTTP_422_UNPROCESSABLE_CONTENT' instead.
    raise ValidationError(

tests/test_vacaciones.py::test_listar_mis_solicitudes
  C:\Users\emisa\AppData\Local\Programs\Python\Python313\Lib\site-packages\sqlalchemy\sql\schema.py:3624: DeprecationWarning: datetime.datetime.utcnow() is deprecated and scheduled for removal in a future version. Use timezone-aware objects to represent datetimes in UTC: datetime.datetime.now(datetime.UTC).
    return util.wrap_callable(lambda ctx: fn(), fn)  # type: ignore

-- Docs: https://docs.pytest.org/en/stable/how-to/capture-warnings.html
=========================== short test summary info ===========================
FAILED tests/test_vacaciones.py::test_solicitar_vacaciones_formato_invalido
=================== 1 failed, 3 passed, 8 warnings in 0.71s ===================
